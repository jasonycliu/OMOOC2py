# 交互101-NET版日记本软件
--------------

##背景
    system: mac 10.11
    python: 2.7.10
    

## 真的如大家所说那么简单吗?
在写私人教程之前看了一下写得快的同学的日记,普遍反映都说比上次GUI简单多了.个人认为网络编程需要用到的知识会更多一些,更容易在实际编程中出现问题.只是日记本这个软件用GUI的实现会更繁琐,而用CLI会比较直接,毕竟GUI需要做界面的设计和代码实现,按理工作量是CLI的两倍.所以我们都觉得CLI比简单,但是网络编程尤其是socket编程其实需要了解更多的知识.

## net交互需要了解什么?
   * 什么是socket套接字?

    网络上的两个程序通过一个双向的通信连接实现数据的交换，这个连接的一端称为一个socket.python官方文档则说"socket-底层的网络接口",看到底层我已经开始醉了,先不管用起来再说.
    
    简单理解sever和client的关系的话可以打一个比方:server类似银行的atm机,它启动准备就绪之后就一直在等待用户这些客户端来给它发送数据,然后atm机器通过处理后向用户返回数据.如果没有客人业就是说客户端不发送消息的话,atm机就会一直空闲的状态下等待请求进来.
   
* UDP socket怎么用?
     * 服务端:
        * 导入socket库
                import socket
        * 创建UDP
                s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
        * 绑定连接
                s.bind('127.0.0.1',9999)
        * 从客户端接收数据(可以大小)
                While True:
                    data,addr = s.recvfrom(1024)
     * 客户端:
        * 还是导入socket库
                import socket
        * 创建基于UDP的socket
                s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
        * 直接发送数据到服务器
                s.sendto(data,('127.0.0.1',9999))
        * 接收数据(可以每次接收的大小,如果超过大小会报异常信息)
                s.recv(1024)
    
* UDP是什么鬼?
    UDP a is connection-less protocol.不是面向连接的协议,看起来就是不可靠的.

* TCP又是什么?
    TCP is a connection oriented stream over an IP network. 它是面向连接的协议,可靠.

##作业代码
   1. server.py
            
            #!/usr/bin/env python
            # -*- coding:utf-8 -*-
            import socket

            HOST = '127.0.0.1'
            PORT = 9999

            s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
            s.bind((HOST,PORT))

            print '等待客户端输入日记...'

            outputtext = ""

            def read():
	            with open('mydiary.log','r') as history:
		        return history.read()

            def write(outputtext):
	            with open('mydiary.log','a+') as f:
		        f.write(outputtext)

            while True:
        	data,addr = s.recvfrom(1024)
        	#当获取的指令为r时,客户端同步数据
        	if(data == 'r'):
        		history = read()
        		s.sendto(history,addr)
        
        	#当指令为h时,客户端打印当前帮助信息
        	elif(data == 'h'):
        		helptext = '\n'.join(['输入[q]退出程序','输入[r]同步历史笔记','输入[h]打印当前日记'])
        		s.sendto(helptext,addr)
        		
        	else:
        		outputtext += '\n' + data
        	    #写数据到文件中
		        write(outputtext)
        		s.sendto(outputtext,addr)
            s.close        

##思考
大妈布置作业的时候为啥选用UDP而不是TCP呢?他说不是命令我们用UDP,那么TCP可以吗?怎么用?他们的写法有什么不同.


##尝试用TCP完成编码
   * 




